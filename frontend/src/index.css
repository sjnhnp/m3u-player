/* ===============================
   主题色变量（YouTube风格三模式）
   支持跟随系统/白天/夜晚
   =============================== */
:root {
  --color-bg:       #f8f9fa;
  --color-bg-card:  #fff;
  --color-border:   #e5e7eb;
  --color-text:     #202124;
  --color-text-light: #757575;
  --color-primary:  #ff0000;  /* YouTube主色红 */
  --color-sidebar:  #f3f5f7;
  --color-sidebar-border: #eee;
  --color-shadow:   0 2px 12px 0 rgba(32,37,83,0.04);
  --color-btn:      #ff0000;
  --color-btn-hover:#e52d27;
  --color-selected-bg: #fff3f0;
  --color-selected-border: #ff0000;
  --item-hover-bg: #f5f5f5;
  --notice-bg: #ffecec;
}

body, #root {
  background: var(--color-bg);
  color: var(--color-text);
}

h2 {
  width: 100%;
  margin-top: 0;
  margin-bottom: 10px;
  color: var(--color-text-light);
  border-bottom: 1px solid var(--color-border);
  padding-bottom: 5px;
}
h3 {
  margin-top: 0;
  margin-bottom: 10px;
  color: var(--color-text-light);
  font-weight: bold;
  letter-spacing: .5px;
}

.app-root { width: 100%; }
.main-flex {
  display: flex;
  gap: 20px;
  height: 100vh;
  min-height: 0;
}

/* 左侧sidebar */
#sidebar {
  width: 320px;
  min-width: 220px;
  max-width: 400px;
  height: 100vh;
  overflow-y: auto;
  background: var(--color-sidebar);
  border-right: 1px solid var(--color-sidebar-border);
  box-shadow: 2px 0 8px 0 rgba(32,37,83,.03);
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  gap: 15px;
}
#sidebar h2 {
  font-size: 1.25em;
  color: var(--color-primary);
  border: none;
  background: none;
  padding-bottom: 0;
  margin-bottom: 10px;
  letter-spacing: .5px;
}

/* ===== 桌面 (≥ 769 px) 侧栏排序 ===== */
#channelArea      { order: 1; }   /* ① 频道列表 */
#status           { order: 2; }   /* ② 通知栏   */
#subscriptionArea { order: 3; }   /* ③ 订阅列表 */
#addSubscriptionArea { order: 4; }/* ④ 添加订阅 */

/* 右主区 */
#main {
  flex: 1 1 0;
  min-width: 0;
  /* height: 100vh; */ /* 保持移除 */
  /* overflow-y: auto; */ /* 保持移除/注释 */
  background: var(--color-bg-card);
  padding: 20px; /* ★★★ 保留或调整内边距 */
  position: relative; /* ★★★ 添加：作为绝对定位的参照物 */
  /* display: flex; */ /* ★★★ 移除 */
  /* flex-direction: column; */ /* ★★★ 移除 */
  /* align-items: center; */ /* ★★★ 移除 */
  /* justify-content: center; */ /* ★★★ 移除 */
  gap: 18px; /* 这个 gap 不再对 #videoArea 生效，如果 #main 内有其他非绝对定位元素则有用 */
  box-shadow: 0 0 20px 0 rgba(28, 88, 125, .04);
  border-radius: 18px;
  /* ★★★ 高度仍然由 .main-flex 的 align-items: stretch (默认) 控制 */
}



/* 卡片样式 */
#addSubscriptionArea, #subscriptionArea, #channelArea, #videoArea {
  background: var(--color-bg-card);
  border-radius: 14px;
  box-shadow: var(--color-shadow);
  padding: 16px;
}

/* 列表美化 */
#subscriptionList, #channelList {
  list-style: none;
  padding: 0;
  margin: 0;
  max-height: 250px;
  overflow-y: auto;
  border: 1px solid var(--color-border);
  border-radius: 8px;
}

#subscriptionList li, #channelList li {
  padding: 10px 15px;
  cursor: pointer;
  border-bottom: 1px solid var(--color-border);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  transition: background 0.2s, color 0.2s;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 1.04em;
}
#subscriptionList li span {
  flex-grow: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  margin-right: 6px;
}
#subscriptionList li:last-child, #channelList li:last-child { border-bottom: none; }
#subscriptionList li.selected, 
#channelList li.selected {
  background: var(--item-hover-bg);
  border-left: 5px solid var(--color-selected-border);
  color: var(--color-primary);
  font-weight: bold;
}
#subscriptionList li:hover, 
#channelList li:hover {
  background-color: var(--item-hover-bg);
  color: var(--color-primary);
}

/* 表单/输入区美化 */
#addSubscriptionArea input[type="url"] {
  width: 100%;
  display: block;
  margin-bottom: 10px;
}

#addSubscriptionArea button,
#subscriptionList li button {
  background: var(--color-btn);
  color: #fff;
  border-radius: 6px;
  font-weight: 600;
  box-shadow: 0 2px 8px 0 rgba(255,0,0,0.07);
  border: none;
  transition: background 0.16s, box-shadow 0.2s;
  cursor: pointer;
}
#addSubscriptionArea button:hover,
#subscriptionList li button:hover {
  background: var(--color-btn-hover);
  box-shadow: 0 4px 16px 0 rgba(220,40,40, 0.15);
}
#addSubscriptionArea button:disabled {
  background: #eee;
  color: #aaa;
  cursor: not-allowed;
  box-shadow: none;
}
#subscriptionList li button {
  margin-left: 10px;
  background: #f87171;
  font-size: 0.9em;
  padding: 3px 7px;
  border-radius: 5px;
  color: #fff;
  border: none;
}
#subscriptionList li button:hover { background: #e52d27; }

/* 状态信息条 */
#status {
  margin-top: 10px;
  padding: 8px 12px;            /* ↙ ↘ 给足垂直空间 */
  background: var(--notice-bg); /* 用主题变量 */
  border-radius: 6px;
  color: #d32f2f;
  font-size: 0.98em;
  line-height: 1.4;             /* 让两行字不挤 */
  border: 1px solid var(--notice-bg);
  min-height: unset;            /* 不再硬撑 1.5em，高度由内容决定 */
  max-width: 100%;
  overflow-wrap: break-word;   /* 自动断长词 / URL */
  box-sizing: border-box;      /* padding 计入宽度，防止撑开 */
}
#status.error { color: #721c24; background: #f8d7da; border: 1px solid #f5c6cb; font-weight: bold; }
#status.success { color: #18842b; background: #d4edda; border: 1px solid #c3e6cb; font-weight: bold; }
#status.loading { color: #004085; background: #cce5ff; border: 1px solid #b8daff; font-style: italic; }
#status.warning { color: #856404; background: #fff3cd; border: 1px solid #ffeeba; }

/* 播放器主区自适应&美化 */
#videoArea {
  width: 100%; /* ★★★ 宽度相对于 #main 的 padding box */
  max-width: 760px; /* ★★★ 限制最大宽度 */
  /* margin: 0 auto; */ /* ★★★ 移除 */
  position: absolute;   /* ★★★ 设置为绝对定位 */
  top: 10px;             /* ★★★ 垂直方向移到 50% */
  left: 50%;            /* ★★★ 水平方向移到 50% */
  transform: translate(-50%, -50%); /* ★★★ 使用 transform 精确居中 */
  background: var(--color-bg-card); /* ★★★ 保留背景 */
  border-radius: 14px;              /* ★★★ 保留圆角 */
  box-shadow: var(--color-shadow);  /* ★★★ 保留阴影 */
  padding: 16px;                    /* ★★★ 保留内边距 */
  box-sizing: border-box;           /* ★★★ 确保 padding 包含在 width 内 */
}

#videoContainer {
  width: 100%;
  padding-top: 56.25%;   /* 16:9缩放 */
  height: 0;
  background: #191919;
  border-radius: 16px;
  overflow: hidden;
  position: relative;
  box-shadow: 0 2px 20px 0 rgba(48,64,112,0.10);
  max-width: 100%;
}
#videoPlayer {
  position: absolute;
  top: 0; left: 0; width: 100%; height: 100%;
  border: none; display: block;
  background: #000;
}

/* ========== 夜间暗色模式覆盖（body.dark或.dark类即可生效） ========== */
body.dark, .dark {
  --color-bg:       #181818;
  --color-bg-card:  #222;
  --color-border:   #232323;
  --color-text:     #f1f3fa;
  --color-text-light:#acb2ba;
  --color-primary:  #ff5252;
  --color-sidebar:  #212121;
  --color-sidebar-border: #242424;
  --color-shadow:   0 2px 16px 0 rgba(48,38,87,0.16);
  --color-btn:      #ff5252;
  --color-btn-hover:#e52d27;
  --color-selected-bg: #272727;
  --color-selected-border: #ff5252;
  --item-hover-bg: #2a2a2d;   
  --notice-bg:     #3c2b2b;
}

body.dark, .dark, body.dark #root {
  background: var(--color-bg) !important;
  color: var(--color-text) !important;
}
.dark #main,
body.dark #main {
  background: var(--color-bg-card);
  color: var(--color-text);
  box-shadow: 0 0 30px 0 rgba(0,0,0,0.08);
}
.dark #addSubscriptionArea, .dark #subscriptionArea, .dark #channelArea, .dark #videoArea,
body.dark #addSubscriptionArea,
body.dark #subscriptionArea,
body.dark #channelArea,
body.dark #videoArea {
  box-shadow: var(--color-shadow);
  background: var(--color-bg-card);
  color: var(--color-text);
}
.dark #sidebar, body.dark #sidebar {
  background: var(--color-sidebar);
  border-right: 1px solid var(--color-sidebar-border);
}
.dark h2, body.dark h2,
.dark h3, body.dark h3 {
  color: var(--color-text-light);
}
.dark #videoContainer, body.dark #videoContainer {
  background: #101010;
  border-radius: 16px;
  box-shadow: 0 2px 28px 0 rgba(0,0,0,0.19);
}

/* 夜间模式按钮更暗一些文字反白 */
.dark #addSubscriptionArea input[type="url"] {
  background: #252525;
}

/* ========== 跟随系统（auto）模式 ========== */
@media (prefers-color-scheme: dark) {
  :root {
    --color-bg:       #181818;
    --color-bg-card:  #222;
    --color-border:   #232323;
    --color-text:     #f1f3fa;
    --color-text-light:#acb2ba;
    --color-primary:  #ff5252;
    --color-sidebar:  #212121;
    --color-sidebar-border: #242424;
    --color-shadow:   0 2px 16px 0 rgba(48,38,87,0.16);
    --color-btn:      #ff5252;
    --color-btn-hover:#e52d27;
    --color-selected-bg: #272727;
    --color-selected-border: #ff5252;
  }
}

/* 白天主题，可以强制覆盖 body.light 或 .light */
body.light, .light {
  --color-bg:       #f8f9fa;
  --color-bg-card:  #fff;
  --color-border:   #e5e7eb;
  --color-text:     #202124;
  --color-text-light: #757575;
  --color-primary:  #ff0000;
  --color-sidebar:  #f3f5f7;
  --color-sidebar-border: #eee;
  --color-shadow:   0 2px 12px 0 rgba(32,37,83,0.04);
  --color-btn:      #ff0000;
  --color-btn-hover:#e52d27;
  --color-selected-bg: #fff3f0;
  --color-selected-border: #ff0000;
  --item-hover-bg: #f5f5f5;
  --notice-bg:     #ffecec;
}

/* ---------- 移动端响应式覆盖 ---------- */
@media (max-width: 900px) {
    #videoArea, #videoContainer {
        max-width: 100vw;
    }
}
/* 主要修改 768px 及以下的规则 */
@media (max-width: 768px) {
  html, body {
    height: 100%;
    overflow: auto; /* 允许 body 滚动，或者在 .main-flex 设置 */
    margin: 0;
    padding: 0;
  }

  /* --- .app-root 简单包裹 --- */
  .app-root {
    width: 100%;
    min-height: 100vh; /* 确保至少撑满屏幕 */
    box-sizing: border-box;
  }

  /* --- .main-flex 作为主要的垂直 flex 容器 --- */
  .main-flex {
    display: flex;
    flex-direction: column; /* ★★★ 垂直排列 */
    width: 100%;
    height: auto; /* 高度由内容决定 */
    min-height: 100vh; /* 至少撑满，允许滚动 */
    overflow-x: hidden; /* 防止水平滚动 */
    overflow-y: auto;   /* 如果内容超出，允许垂直滚动 */
    gap: 15px; /* 各区域之间的间距 */
    padding: 10px; /* 给整个移动端视图一些边距 */
    box-sizing: border-box;
  }

  /* --- #main (包含播放器) 设置 order 为 1 (最前) --- */
  #main {
    order: 1; /* ★★★ 关键：显示在最前面 */
    width: 100%; /* 撑满宽度 */
    min-width: unset;
    max-width: unset;
    height: auto; /* 高度自适应 */
    overflow: visible; /* 不需要内部滚动 */
    background: transparent; /* 背景通常不需要 */
    padding: 0; /* 移除桌面端的内边距 */
    display: block; /* 改回块级 */
    /* 移除之前的 flex 相关属性 */
    /* align-items: center; */
    /* justify-content: flex-start; */
  }

  /* --- #sidebar (包含列表和表单) 设置 order 为 2 --- */
  #sidebar {
    order: 2; /* ★★★ 关键：显示在 #main 之后 */
    width: 100%; /* 撑满宽度 */
    min-width: unset;
    max-width: unset;
    height: auto; /* 高度由内容决定 */
    overflow: visible; /* 不需要独立滚动 */
    background-color: transparent; /* 背景通常不需要 */
    border-right: none; /* 移除边框 */
    box-sizing: border-box;
    /* ★★★ 使 sidebar 内部也成为 flex 容器以排序其子元素 ★★★ */
    display: flex;
    flex-direction: column;
    gap: 15px; /* 内部元素间距 */
    padding: 0; /* 移除桌面端的内边距 */
  }

  /* --- 调整 #sidebar 内元素的顺序 --- */
  #channelArea {
    order: 2; /* ★★★ 频道列表最先 (在 Sidebar 内部) */
    width: 100%;
    margin: 0; /* 重置外边距 */
  }
  #subscriptionArea {
    order: 3; /* ★★★ 订阅源列表其次 */
    width: 100%;
     margin: 0;
  }
  #addSubscriptionArea {
    order: 4; /* ★★★ 添加区域再次 */
    width: 100%;
     margin: 0;
  }
  #status {
    order: 1; /* ★★★ 状态栏最后 (在 Sidebar 内部) */
    width: 100%;
    margin: 0; /* 重置外边距 */
    margin-top: 5px; /* 可以稍微给点顶部间距 */
  }

  /* --- 播放器区域样式调整 --- */
/* 播放器主区自适应&美化 */
#videoArea {
  width: 100%;
  max-width: 760px;
  /* margin: 0 auto 16px auto; */ /* 原来的 */
  margin: 0 auto; /* 修改为这个，实现更精确的垂直居中 */
  /* 其他样式保持不变 */
  background: var(--color-bg-card); /* 注意：这个背景色可能不需要了，因为 #main 有背景 */
  border-radius: 14px;
  box-shadow: var(--color-shadow);
  padding: 16px; /* 这个内边距是 videoArea 自身的，可以保留 */
}


  /* 播放器标题可以保留 */
  #videoArea > h3 {
     padding: 10px 15px 0 15px; /* 给标题一些空间 */
     margin-bottom: 5px;
  }

  /* #videoContainer 保持宽高比 */
  #videoContainer {
    width: 100%;
    padding-top: 56.25%; /* 16:9 */
    height: 0;
    background-color: #000;
    border-radius: 0 0 8px 8px; /* 底部圆角 */
    overflow: hidden;
    position: relative;
    box-shadow: none; /* 阴影在 #videoArea 上 */
    max-width: 100%;
  }

  #videoPlayer {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    border: none; display: block;
    background: #000;
  }

  /* 调整列表区域的样式 */
  #addSubscriptionArea, #subscriptionArea, #channelArea {
    background-color: #fff;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    width: 100%; /* 确保撑满 */
    box-sizing: border-box;
  }
  #subscriptionList, #channelList {
      max-height: 300px; /* 可以增加最大高度 */
  }

}
/*
@media (max-width: 600px) {
    #videoArea, #videoContainer {
        max-width: 100vw;
        min-width: 0;
    }
}
*/

/* 字体更柔和YouTube风 */
body, input, select, button {
  font-family: Roboto,Noto,Noto Sans SC,Arial,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;
}

/* 5.3修复其它地方暗夜情况 */

/* 夜间模式全局表单控件样式加强（input/select/textarea/button） */
body.dark input,
body.dark select,
body.dark textarea {
  background: #222 !important;
  color: #eee !important;
  border: 1px solid #333 !important;
}

body.dark input::placeholder,
body.dark textarea::placeholder {
  color: #888 !important;
  opacity: 1;
}

body.dark button,
body.dark input[type="button"],
body.dark input[type="submit"] {
  background: var(--color-btn, #444) !important;
  color: #fff !important;
  border: none;
}

body.dark select {
  background: #222 !important;
  color: #eee !important;
  border: 1px solid #333 !important;
}

/* ------ 主题切换器（右上角） ------ */
.theme-switcher { position: relative; }

.theme-btn {
  background: transparent;
  border: none;
  font-size: 22px;            /* 图标大小 */
  cursor: pointer;
  color: var(--color-text);   /* 文字颜色自动跟主题变 */
  line-height: 1;
}

.theme-menu {
  position: absolute;
  right: 0;
  top: calc(100% + 6px);      /* 挨着按钮下面 */
  list-style: none;
  margin: 0;
  padding: 4px 0;
  background: var(--color-bg-card);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  z-index: 99;
  min-width: 140px;
}

.theme-menu li {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 12px;
  font-size: 14px;
  cursor: pointer;
  white-space: nowrap;
}

/* ---② 对勾占位 & 居中--- */
.theme-menu li .check {          /* 新增 */
  width: 1em;                    /* 让没勾的行也占 1 字宽 */
  text-align: center;
}

/* ---③ 当前模式高亮（蓝色/加粗）--- */
.theme-menu li.active {          /* 新增 */
  font-weight: 700;
  color: var(--color-primary);
}

.theme-menu li:hover {
  background: var(--color-selected-bg);
  color: var(--color-primary);
}

/* ------ 顶部导航条 ------ */
.app-header {
  width: 100%;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: space-between;  /* 左右贴边 */
  padding: 0 16px;
  box-sizing: border-box;
  background: var(--color-bg-card);
  border-bottom: 1px solid var(--color-border);
  margin-bottom: 8px;  /* 和下面内容空一点 */
}

.app-title {
  font-size: 1.3em;
  margin: 0;
  color: var(--color-primary);
}

/* === 所有输入框基础外观，覆盖浏览器默认 === */
input[type="url"],
input[type="search"],
input[type="text"] {
  background: var(--color-bg);
  color: var(--color-text);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  padding: 10px;
  font-size: 1em;
  box-sizing: border-box;
  transition: border 0.2s, box-shadow 0.2s;
}

/* === 聚焦态：红色内边框 + 阴影；去掉蓝色外描边 === */
input[type="url"]:focus,
input[type="search"]:focus,
input[type="text"]:focus {
  border: 1.5px solid var(--color-primary);          /* 红边 */
  box-shadow: 0 2px 8px 0 rgba(255, 0, 0, 0.06);     /* 红阴影 */
  outline: none;                                     /* 去掉系统蓝圈 */
}
